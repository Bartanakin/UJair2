CREATE OR REPLACE View FLightsDataForPassengers AS
select `UJAIR2`.`Flights`.`ID` AS `FlightID`,`UJAIR2`.`Flights`.`DateTimeOfDeparture` AS `DateTimeOfDeparture`,`UJAIR2`.`Flights`.`RouteID` AS `RouteID`,`UJAIR2`.`Flights`.`Price` AS `Price`,`UJAIR2`.`Flights`.`Canceled` AS `Canceled`,`StartingAirports`.`ID` AS `StartingAirportID`,`StartingAirports`.`Airport_name` AS `StartingAirportName`,`TargetAirports`.`ID` AS `TargetAirportID`,`TargetAirports`.`Airport_name` AS `TargetAirportName`,`UJAIR2`.`Airplanes`.`ID` AS `AirplaneID`,`UJAIR2`.`AirplaneTypes`.`TypeName` AS `TypeName`,`UJAIR2`.`AirplaneTypes`.`Max_number_of_stewards` AS `Max_number_of_stewards`,`CalculateEstimatedArrivalTime`(`UJAIR2`.`AirplaneTypes`.`Average_speed_km_per_h`,`UJAIR2`.`Routes`.`Distance`,`UJAIR2`.`Flights`.`DateTimeOfDeparture`) AS `EstimatedArrivalTime` from (((((`UJAIR2`.`Flights` join `UJAIR2`.`Routes` on((`UJAIR2`.`Routes`.`ID` = `UJAIR2`.`Flights`.`RouteID`))) join `UJAIR2`.`Airplanes` on((`UJAIR2`.`Flights`.`AirPlaneID` = `UJAIR2`.`Airplanes`.`ID`))) join `UJAIR2`.`AirplaneTypes` on((`UJAIR2`.`Airplanes`.`AirplaneTypeID` = `UJAIR2`.`AirplaneTypes`.`ID`))) join `UJAIR2`.`Airports` `StartingAirports` on((`StartingAirports`.`ID` = `UJAIR2`.`Routes`.`StartingAirportID`))) join `UJAIR2`.`Airports` `TargetAirports` on((`TargetAirports`.`ID` = `UJAIR2`.`Routes`.`TargetAirportID`)))